<Lean>
import Mathlib.Data.Real.Basic
import Mathlib.Tactic.Ring
example {a b m n : â„¤} (hx : b^2 = 2*a^2) (hy : a*m+b*n = 1) : (2*a*n+b*m)^2 = 2 := by
  calc
<Math>
    (2an + bm) ^ 2 =4a^2n^2+4anbm+b^2m^2
<Auto>
    _=2(a^2m^2+2anbm+b^2n^2)+(4a^2n^2+b^2m^2-2a^2m^2-2b^2n^2)
<Auto>
    _= 2(am + bn) ^ 2 + (m ^ 2 - 2n ^ 2) (b ^ 2 - 2 a ^ 2) 
<Auto>
    _= 2 \cdot 1 ^ 2 + (m ^ 2 - 2n ^ 2) (2a ^ 2 - 2a ^ 2) 
<Auto>
    _ = 2
<Auto>